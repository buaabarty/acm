<html><body bgcolor="#ffffff" text="#000000"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>The Centaur company has N servers, numbered 1 through N.
These servers are currently connected into a network.
The topology of the network is a tree.
In other words, there are exactly N-1 bidirectional cables, each connecting some two servers in such a way that the entire network is connected.</p>
<br></br>
<p>The Centaur company is about to split into two new companies: the Human company and the Horse company.
When this happens, the companies will divide the servers randomly.
More precisely, for each of the N servers the two companies will flip a fair coin, and the winner of the coin flip gets the server.
Once they divide the servers, each company will configure their own servers not to use the cables that lead to the servers of the other company.</p>
<br></br>
<p>Of course, it may then happen that some pairs of servers that belong to the same company will not be able to communicate any more.
Therefore, each of the new companies will then use new, additional cables to connect all of its servers to the same network.
New cables can be added for free.
However, each of the servers currently only has one empty slot into which an end of a cable can be inserted.
Adding one additional empty slot to a server costs 1.
If desired, it is possible to add multiple slots to the same server.
Each of the companies will connect their servers using a way with the smallest possible cost.</p>
<br></br>
<p>You are given two vector &lt;int&gt;s <b>a</b> and <b>b</b>, each containing N-1 elements.
These two arrays describe the original cables:
for each i, there is a cable that connects the servers <b>a</b>[i] and <b>b</b>[i].</p>
<br></br>
<p>Compute and return the expected value of the total cost paid by the two companies to connect their networks.
(The expectation is taken over all possible ways in which they can divide the N servers.)</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>CentaurCompany</td></tr><tr><td>Method:</td><td>getvalue</td></tr><tr><td>Parameters:</td><td>vector &lt;int&gt;, vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>double</td></tr><tr><td>Method signature:</td><td>double getvalue(vector &lt;int&gt; a, vector &lt;int&gt; b)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td>&#160;&#160;&#160;&#160;</td></tr><tr><td></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>N can be determined as (1 + the length of <b>a</b>).</td></tr><tr><td align="center" valign="top">-</td><td>The expected value of a variable can be seen as the average value of the variable, where the average is taken over many rounds of the experiment. See http://en.wikipedia.org/wiki/Expected_value for a formal definition.</td></tr><tr><td align="center" valign="top">-</td><td>Your return value must have a relative or absolute error of at most 1e-9.</td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td>N will be between 2 and 36, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>a</b> and <b>b</b> will contain exactly N-1 elements.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>a</b> and <b>b</b> will be between 1 and N, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>The network defined by <b>a</b> and <b>b</b> will be a tree (as explained in the problem statement).</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{1}</pre></td></tr><tr><td><pre>{2}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.0</pre></td></tr><tr><td><table><tr><td colspan="2">Regardless of the result of the coin flips, the companies don't need additional cables to connect their own servers. Therefore, the expected cost is zero.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{1,1,1}</pre></td></tr><tr><td><pre>{2,3,4}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.125</pre></td></tr><tr><td><table><tr><td colspan="2">If the Horse company gets only the server 1 and the Human company gets the other servers, the Human company must add one empty slot. For example, the Human company can add one empty slot to the server 2 and add new cables to connect the server 2 with the servers 3 and 4. Similarly, if the Human company gets only the server 1 and the Horse company gets the other servers, the cost will also be 1. In all other cases the cost will be 0. The expected cost is 1/(2^4) + 1/(2^4) = 1/8.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{1,2,3,2,2}</pre></td></tr><tr><td><pre>{2,3,4,5,6}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.375</pre></td></tr><tr><td><table><tr><td colspan="2">For example, if the Horse company gets only the server 2 and the Human company gets the other servers, the Human company must add one empty slot. In the picture below, initially each server has one empty slot (blue). The Human company adds one extra slot (yellow) to the server 5. The Human company also adds cables that connect the servers 1 and 5, 3 and 5, and 4 and 6.
<br></br><br></br>
<img src="http://www.topcoder.com/contest/problem/CentaurCompany/network.png"></img>
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{1,2,3,4,5,6,7,8,9}</pre></td></tr><tr><td><pre>{2,3,4,5,6,7,8,9,10}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.41796875</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}</pre></td></tr><tr><td><pre>{2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 15.500000001076842</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">5)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{10, 7, 2, 5, 6, 2, 4, 9, 7}</pre></td></tr><tr><td><pre>{8, 10, 10, 4, 1, 6, 2, 2, 3}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.646484375</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
